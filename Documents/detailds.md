# 詳細設計

## 1. プロジェクト概要

### 1.1 目的
結婚式の参加者に新郎の人生をRPG形式で追体験してもらうゲームを作成し、結婚式会場で遊んでもらう

### 1.2 ターゲット
- 結婚式参加者（老若男女）
- スマートフォン・タブレットでの操作を想定

### 1.3 技術スタック
- **フロントエンド**: Phaser.js + HTML5
- **開発環境**: Docker + （VSCode + cursol）
- **デプロイ**: **要検討（GitHub Pages想定）**

### 1.3 技術スタック
- **フロントエンド**: Phaser.js + HTML5
- **開発環境**: Docker + （VSCode + cursol）
- **デプロイ**: **要検討（GitHub Pages想定）**
- **素材制作**: 
  - **ドット絵**: Aseprite（キャラクター・アニメーション）
  - **画像加工**: GIMP（写真編集・背景・立ち絵）
  - **マップ制作**: Tiled（RPGマップ・レベルデザイン）
  - **UI設計**: Figma（メニュー・ボタン・レイアウト）
  - **AI支援**: **要検討（Stable Diffusion、Stable Diffusion Web UI、等でドット絵生成）**


### 1.4 プロジェクト制約
- **予算**: **0円想定**
- **納期**: **9月１日（結婚式の日程 9/5）**
- **開発期間**: **2.5ヶ月**
- **会場制約**: **要確認（Wi-Fi環境・デバイス）**

---

## 2. ゲーム仕様

### 2.1 ゲームフロー

QRコードスキャン → オープニング動画 →　ステージセレクト → RPGスタート → エンディング動画

- **要調整**: 各パートの詳細時間配分

### 2.2 ゲーム構成
1. **オープニング**: YouTube動画（スキップ可能） 約1.5分
2. **RPGパート**: 新郎の人生を追体験　ステージごとに５分
3. **エンディング**: 結婚への道のり + おめでとメッセージ　約1.5分

### 2.3 操作方法
- **移動**: タップ/クリック、十字キー
- **決定**: タップ/Enterキー
- **メニュー**: ESCキー/メニューボタン


## 3. シーン設計

### 3.1 シーン一覧

#### Scene 1: 幼少期（実家）
- **マップ**: **要確認（実家周辺の具体的な場所）**
- **イベント**: 
  - **要収集（家族との思い出話の具体的なエピソード）**
- **BGM**: **要選定（当時や思い出の音楽）**
  - ケツメイシ
  - 舐達麻
  - 各人すきなもの

#### Scene 2: 学生時代（小学校）
- **マップ**: **要確認（学校・部活動場所の特定）**
- **イベント**:
  - **要収集（部活動での成長エピソード）**
  - **要収集（友人との青春エピソード）**
  - **要収集（印象的で具体的なエピソード）**
- **BGM**: **要選定（当時や思い出の音楽）**
  - ケツメイシ
  - 舐達麻
  - 各人すきなもの

#### Scene 3: 学生時代（中学校）
  - **収集要（友人との青春エピソード）**
  - **収集要（印象的で具体的なエピソード）**
- **BGM**: **要選定（当時や思い出の音楽）**
  - ケツメイシ
  - 舐達麻
  - 各人すきなもの

#### Scene 4: 学生時代（高校）
**要収集（青春エピソード）**
  - ビデオカメラ落として、一部かけた
  - 竹田との派閥（竹田のチンピラをとか）
- **イベント**:
  - **要収集（新婦との出会いエピソード）**
  - **要収集（初デートの思い出）**
  - **要収集（プロポーズシーンの詳細）**
- **BGM**: **要選定（当時や思い出の音楽）**
  - ケツメイシ
  - 舐達麻
  - 各人すきなもの

#### Scene 5: 学生時代（大学）
- **マップ**: **要確認（式場・新居の場所）**
- **要収集（初デートの思い出）**  
- **イベント**:
  - **15万のBMWを乗り回して、すぐ壊れる**
- **BGM**: **要選定（当時や思い出の音楽）**
  - ケツメイシ
  - 舐達麻
  - 各人すきなもの

#### Scene 6: 社会人
- **マップ**: **要確認（式場・新居の場所）**   
- **イベント**:
  - **要収集（エピソード収集）** 
- **BGM**: **要選定（当時や思い出の音楽）**
  - ケツメイシ
  - 舐達麻
  - 各人すきなもの

### 3.2 バトルシステム保留（オプション）
- **人生の試練をバトルで表現**
- ポケモン風のターン制バトル
- 敵: 「受験のプレッシャー」「竹田の連中」「就活の不安」「仕事のストレス」等
- **要判断（実装可否は開発工数次第）**

---

## 4. キャラクター設計

### 4.1 主人公（新郎）
- **外見**: **要素材（新郎の写真提供待ち）**
- **年代別差分**: 幼少期、小、中、高、大学生、社会人、現在
- **表情**: 通常、笑顔、困った顔、決意の顔

### 4.2 サブキャラクター
- **新婦**: **要相談（デザイン・登場タイミング）**
- **家族**: **要作成（両親、兄弟姉妹の登場人物リスト）**
- **友人**: **要収集（各時代の重要な友人エピソード）**
    - だいち
    - こうたろう
    - かなと
    - おなき
    - その他高校
    - 小学生時の友達
    - 大学時代の友達
- **先生・上司**: **要確認（実名使用可否・成長に関わった人物）**

  →ぶっちゃけ、基本モブでよいはず

### 4.3 立ち絵仕様

- **実写絵あれば**
- **その他はイラスト屋でも持ってくる**
- **サイズ**: 200x400px
- **形式**: PNG（背景透過）
- **パターン**: 各主要キャラ最低3表情

---

## 5. UI/UX設計

### 5.1 画面レイアウト

#### RPGモード

OP画面

![OP画面 drawio](https://github.com/user-attachments/assets/247a55cb-e51a-41f1-80c1-f8c948eeb8dd)


ステージセレクト画面

![ステージセレクト drawio](https://github.com/user-attachments/assets/fc6ade93-0aff-4ea8-ac21-6fca49137547)


ゲームマップ画面

![ゲームマップ](https://github.com/user-attachments/assets/baea85ad-3f6c-4295-bab8-91848cf5046c)


ADV画面

![会話画面](https://github.com/user-attachments/assets/8b5b7fbf-b0c0-48bc-b931-4659e295c1d4)


戦闘画面候補１（保留）

![戦闘画面候補１ drawio](https://github.com/user-attachments/assets/ebf0a344-dabb-48fc-a23b-4c0cb302b8bb)

戦闘画面候補２（保留）

![戦闘画面候補２ drawio](https://github.com/user-attachments/assets/b0bcc1d8-4342-4b6f-988d-901e47adebf0)

エンディング

![エンディング drawio](https://github.com/user-attachments/assets/4ee9d5d0-b4aa-4a32-94b8-490150baf2c5)

### 5.2 メニュー画面
- **セーブ/ロード**: ローカルストレージ使用
- **設定**: 音量調整、画面モード
- **スキップ（保留）**: 既読部分の高速化

### 5.3 レスポンシブ対応
- **スマートフォン**: 横向き最適化
- **タブレット**: 横向き対応

---

## 6. 技術仕様

### 6.1 ファイル構成

```markdown
zosusoft-prj-hirokazu/
|   .eslintrc.js            # コード品質チェックツールの設定       
|   .gitignore              # Gitで管理しないファイルの指定
|   package-lock.json       # 依存関係の詳細バージョン固定
|   package.json            # プロジェクト情報・依存関係管理
|   tree_output.txt
|   webpack.config.js       # モジュールバンドラーの設定
|
+---.devcontainer           # Docker関連
|       devcontainer.json   # リモートコンテナの設定
|       docker-compose.yml  # 開発用のDocker Compose設定  
|       Dockerfile          # 開発用のDocker Compose構成   
|
+---Documents               # 各資料関係
|       detailds.md         # 詳細設計書
|       milestone.md        # 日程  
|       README.md           # つべこべ言わず、読んどけおらぁ
|
+---node_modules            # 開発ツール・リンター系のモジュール 
|
+---src                     # ソース
|   |   index.html          # メインHTMLファイル
|   |   index.js            # メインJavaScriptファイル
|   |
|   \---assets              # ゲーム素材
|       +---characters      # キャラクター関連
|       |   +---player      # プレイヤー
|       |   +---npcs        # NPC
|       |   +---enemies     # 敵キャラ
|       |
|       +---maps            # マップ・地形関連
|       |   +---tilesets    # タイルセット
|       |   |   +---objects # オブジェクト
|       |   |          xxxx.png     # 素材
|       |   +---previews    # プレビュー画像
|       |   |       xxx.png
|       |   \---test_maps   # テストマップ
|       |           xxx.tmj
|       |
|       +---ui              # UI素材
|       |   +---menus       # メニュー
|       |   +---buttons     # ボタン
|       |   \---icons       # アイコン
|       |
|       +---effects         # エフェクト
|       |   +---particles   # パーティクル
|       |   \---animations  # アニメーション
|       |
|       \---audio           # 音声素材
|           +---bgm         # BGM
|           +---se          # 効果音
|           \---voice       # ボイス
```

### 6.2 データ管理
```javascript
// セーブデータ構造例
const saveData = {
  playerName: "**要設定（新郎の名前）**",
  currentScene: "scene3",
  level: 25,
  experience: 1250,
  flags: {
    metWife: true,
    graduatedUniversity: true,
    gotJob: true
  },
  inventory: ["思い出の写真", "結婚指輪"],
  timestamp: "2025-06-16T10:30:00Z"
};
```

### 6.3 外部連携
- **YouTube API**: 動画再生・制御
- **Web Audio API**: BGM・効果音管理
- **Local Storage**: セーブデータ保存　（ブラウザを帰るとセーブデータは消える）

---

## 7. 素材仕様

### 7.1 画像素材
- **キャラクター**: 32x48px（ドット絵）
- **立ち絵**: 200x400px（PNG）
- **背景**: 800x600px（実写・イラスト）
- **タイル**: 32x32px（統一）

### 7.2 音声素材
- **BGM**: MP3、ループ対応
- **効果音**: 短い音（決定音、移動音等）
- **ボイス**: **要検討（重要シーンのみ、実装可否）**

### 7.3 動画素材
- **形式**: MP4（H.264）
- **解像度**: 1280x720p
- **長さ**: **要調整（オープニング3分、エンディング5分）**
- **配信**: **要設定（YouTube限定公開）**

---

## 8. 開発スケジュール
# ゲーム開発スケジュール
📊 **進捗管理**: [Issue #1で管理中](https://github.com/zos-shoyusoft-proj-hirokazu/hirokazu-life-journey/issues/1)

#　milestone.mdに別途記載
📋 **詳細スケジュール**: [milestone.md](./milestone.md)


## 9. リスク管理

### 9.1 技術的リスク
- **パフォーマンス**: 素材サイズの最適化
- **ブラウザ対応**: クロスブラウザテスト必須
- **ネットワーク**: **要検討（オフライン機能の必要性）**

### 9.2 運用リスク
- **会場のWi-Fi**: **要確認（事前テスト必須）**
- **デバイス対応**: 様々な端末での動作確認
- **バックアップ**: **要準備（複数の配信経路）**

### 9.3 コンテンツリスク
- **著作権**: **要確認（BGMは著作権フリー素材使用）**
- **プライバシー**: **要確認（個人情報の取り扱い注意）**

---

## 10. 成功指標

### 10.1 定量指標
- ゲーム完了率: **要設定（80%以上が目標）**
- 平均プレイ時間: **要調整（15-20分が目標）**
- 同時接続数: **要テスト（50人対応が目標）**

### 10.2 定性指標
- 参加者の満足度
- SNS でのシェア数
- 新郎新婦の満足度

---

## 11. 付録

### 11.1 参考資料
- Phaser.js公式ドキュメント
- Tiled マップエディタ使用法
- YouTube API リファレンス

### 11.2 素材リソース
- **要収集（無料ドット絵素材サイトのリスト）**
- **要収集（著作権フリーBGMのリスト）**
- **要収集（結婚式向けテンプレートのリスト）**

### 11.3 連絡先
- **要設定（開発チーム連絡先）**
- **要作成（緊急時対応手順）**
